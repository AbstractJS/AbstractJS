!function(a){"use strict";NodeList.prototype.forEach=Array.prototype.forEach,a.x=function(){return{methods:{},controllers:{},services:{},core:{randomString:function(){return"randomString"},parsers:{}}}}()}(this),function(a){"use strict";a.core.addController=function(b,c){return void 0===a.controllers[b]&&(a.controllers[b]=new a.Controller(b,c)),a.core.mapper.map(c,a.controllers[b]),a.controllers[b]}}(this.x),function(a){"use strict";a.core.addParser=function(b,c){-1!=b.indexOf(".")?(b=b.split("."),a.core.parsers[b[0]]||(a.core.parsers[b[0]]={}),a.core.parsers[b[0]][b[1]]=c):a.core.parsers[b]=c}}(this.x),function(a){"use strict";a.core.ajax=function(b){var c=b.callback||function(){return!1},d=b.url,e=b.method||"GET",f=b.data||!1,g;if("undefined"!=typeof XMLHttpRequest)g=new XMLHttpRequest;else for(var h=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],i=0,j=h.length;j>i;i++)try{g=new ActiveXObject(h[i]);break}catch(k){}g.onreadystatechange=l;function l(){if(!(g.readyState<4)&&200===g.status&&4===g.readyState)for(var b in a.controllers)a.controllers[b].xApply(c,[g.response])}g.open(e,d,!0),"POST"==e.toUpperCase()?(g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f=a.core.serialize(f),g.send(f)):g.send("")}}(this.x),function(a){"use strict";a.core.checkDependencies=function(b){var c=[];for(var d in b)if(d<b.length-1){if(!a.services[b[d]])throw b[d]+" dependencie Not Fount =[";c[d]=a.services[b[d]]}return c}}(this.x),function(a){"use strict";a.core.extractField=function(b,c,d){if(b=b.replace(/\}\}/g,"").replace(/\{\{/g,"").trim(),c){var e="";if(b.indexOf(".")>0)return e=b.split("."),b=b.replace(e[0]+".",""),a.core.extractField(b,c[e[0]]);if(b.indexOf("][")>0)e=b.split("][");else{if(!(b.indexOf("[")>0))return c[b];e=b.split("[")}}}}(this.x),function(a){"use strict";a.core.mapper=function(b,c){function d(a){return 3===a.nodeType&&a.textContent.match(/\{\{.*\}\}/g)?!0:void 0}function e(b,c,d){var e={};for(var f in b)c.addPlaceholder([b[f]],d),e[b[f]]=a.core.extractField(b[f],c);return e}function f(a,b){var c=a.match(/{{[^}]+}}/g);return{fields:c,DOM:a}}function g(a,b){if(a.getAttribute&&a.hasAttribute("x-repeat")===!1&&a.hasAttribute("x-content")===!1)for(var c in a.childNodes)isNaN(c=parseInt(c))||(c=a.childNodes[c],h(c,b))}function h(b,c){if(d(b)){b.originalText=b.wholeText;var h=f(b.originalText,c);h.fields=e(h.fields,c,b),b.originalFields=h.fields,b.textContent=a.core.render(b,h.fields)}else g(b,c)}return{map:function(a,b){g(a,b)}}}(a)}(this.x),function(a){"use strict";a.core.parse=function(){if("string"==typeof arguments[0])c(arguments[0],arguments[1],arguments[2]);else{var b=document.querySelectorAll("[x-controller]");b.forEach(function(b,e){var f=a.core.parsers["x-controller"](b);for(var g in a.core.parsers)"function"==typeof a.core.parsers[g]?d(g,a.core.parsers[g],b,f):c(g,b,f)})}function c(b,c,e){for(var f in a.core.parsers[b])d(f,a.core.parsers[b][f],c,e)}function d(a,b,c,d){if("x-controller"!=b){var e=c.querySelectorAll("["+a+"]");e.forEach(function(a){b(a,d)})}}}}(this.x),function(a){"use strict";a.core.render=function(a,b){var c=a.originalText;for(var d in b)c=c.replace(new RegExp(d,"g"),b[d]);return c}}(this.x),function(a){"use strict";a.core.repeatIterator=function(b,c,d,e,f){var g=d.match(/\{\{.*\}\}/g),h="";f[c].forEach(function(b,c){var e=d;b.$index=c;for(var f in g){var i=g[f].replace(/}}|{{/g,"");e=e.replace(g[f],a.core.extractField(i,b))}h+=e}),e.innerHTML=h,a.core.parse("events",e,f)}}(this.x),function(a){"use strict";a.core.serialize=function(a){var b="";for(var c in a)b+=c+"="+a[c];a=encodeURI(a)}}(this.x),function(a){"use strict";a.core.addParser("x-ajax",function(b,c){var d=b.getAttribute("x-ajax");if("FORM"==b.tagName.toUpperCase()){if(b.getAttribute("x-model")){var e=b.getAttribute("x-model");c[e]?c[e].appendDom(b):c.appendModel(new a.Model(c,b))}b.addEventListener("submit",function(c){c.preventDefault(),a.core.ajax({method:b.getAttribute("method"),url:b.getAttribute("action"),callback:function(){console.log("TODO : Simple ajax return ")}})})}})}(this.x),function(a){"use strict";a.core.addParser("x-content",function(b,c){var d=b.getAttribute("x-content"),e=b.getAttribute("x-collection")||a.core.randomString(),f=b.innerHTML,g="data",h="",i=f.match(/\{\{.*\}\}/g);a.core.ajax({url:d,callback:function(d){d=JSON.parse(d),c[e]=d[g],d[g].forEach(function(b,c){var d=f;b.$index=c;for(var e in i){var g=i[e].replace(/}}|{{/g,"");d=d.replace(i[e],a.core.extractField(g,b))}h+=d}),b.innerHTML=h,a.core.parse("events",b,c)}})})}(this.x),function(a){"use strict";a.core.addParser("x-controller",function(b){var c=b.getAttribute("x-controller");return a.core.addController(c,b)})}(this.x),function(a){"use strict";a.core.addParser("events.x-click",function(a,b){var c=a.getAttribute("x-click"),d=c.match(/\(.*\)/g)[0].replace("(","").replace(")","").split(",");for(var e in d)-1!=d[e].indexOf("function")||("'"!=d[e][0]&&'"'!=d[e][0]&&"["!=d[e][0]?d[e]=parseInt(d[e]):("'"==d[e][0]||'"'==d[e][0])&&(d[e]=d[e].replace('"',"").replace("'","").replace('"',"").replace("'","").replace('"',"").replace("'","")));if(console.log(b),c=c.match(/.*\(/g)[0].replace("(",""),!b[c])throw"Method "+c+" not found =[";a.addEventListener("click",function(){b.xApply(b[c],d)})}),a.core.addParser("events.x-mouseover",function(a,b){var c=a.getAttribute("x-mouseover"),d=c.match(/\(.*\)/g)[0].replace("(","").replace(")","").split(",");for(var e in d)-1!=d[e].indexOf("function")||("'"!=d[e][0]&&'"'!=d[e][0]&&"["!=d[e][0]?d[e]=parseInt(d[e]):("'"==d[e][0]||'"'==d[e][0])&&(d[e]=d[e].replace('"',"").replace("'","").replace('"',"").replace("'","").replace('"',"").replace("'","")));c=c.match(/.*\(/g)[0].replace("(",""),a.addEventListener("mouseover",function(){b[c].apply(b,d)})})}(this.x),function(a){"use strict";a.core.addParser("x-repeat",function(b,c){var d=b.getAttribute("x-repeat").trim().split("in"),e=d[1].trim(),f=b.innerHTML,g=c[e].length;a.core.repeatIterator(d,e,f,b,c),c.watch(e,function(){a.core.repeatIterator(d,e,f,b,c)})})}(this.x),function(a){"use strict";a.Collection=function(){}}(this.x),function(a){"use strict";a.Controller=function(){return arguments[1].tagName||"API_CALL"==arguments[1]?(this.htmlElement=arguments[1],this.controllerName=arguments[0],this.watchers=[],this.placeholders=[],{addPlaceholder:function(a,b){this.placeholders||(this.placeholders={}),this.placeholders[a]||(this.placeholders[a]=[]),this.placeholders[a].push(b)},getPlaceholders:function(a){return this.placeholders[a]},watch:function(a,b){this.watchers||(this.watchers={}),this.watchers[a]||(this.watchers[a]=[]),this.watchers[a].push(b)},xApply:function(b,c){b.apply(this,c);var d=b.toString().match(/(this..+?\s*=)|(this..+?\s*.splice)|(this..+?\s*.split)/g);null!==d&&(console.log(d),d.forEach(function(b,c){b=b.replace(/(\s?=)|(this\.)|(this\[)/,"").replace(/\s?=/,"").replace(/\'\]/,"").replace("'","").replace(/\.split/,"").replace(/\.splice/,"");for(var d in this.watchers[b])this.watchers[b][d]();var e=this.getPlaceholders("{{"+b+"}}");for(var f in e)e[f].originalFields["{{"+b+"}}"]!=this[b]&&(e[f].textContent=e[f].originalText,e[f].originalFields["{{"+b+"}}"]=this[b],e[f].textContent=a.core.render(e[f],e[f].originalFields))}.bind(this)))},appendModel:function(a){this[a.getModelName()]=a}}):(void 0===a.controllers[arguments[0]]&&(a.controllers[arguments[0]]=new a.Controller(arguments[0],"API_CALL")),arguments[1][arguments[1].length-1].apply(a.controllers[arguments[0]],a.core.checkDependencies(arguments[1])),a.controllers[arguments[0]])}}(this.x),function(a){"use strict";a.Model=function(a,b){var c=this,d={},e=b.getAttribute("x-model"),f=[b],g=function(){var a=b.getElementsByTagName("input"),c={};for(var e in a)if("object"==typeof a[e]){var f=a[e].getAttribute("name");c[f]=a[e].value,a[e].addEventListener("keypress",h),a[e].addEventListener("change",h)}return i(d,c)},h=function(a){var b=a.target,c=b.getAttribute("name"),e=b.value;d[c]=e,j(d)},i=function(a,b){for(var c in b)a[c]=b[c];return a},j=function(a){for(var b in a)k(b,a[b])},k=function(a,b){f.forEach(function(c){c.querySelectorAll('[name="'+a+'"]').forEach(function(a,c){a.value=b})})},l=function(){return i(g(),d),m};l();var m=this;return{appendDom:function(a){f.push(a)},getModelName:function(){return e},getData:function(){var a={};return a[e]=d,a},edit:function(a){return j(a),a}}}}(this.x),function(a){"use strict";a.Service=function(){a.services[arguments[0]]=new arguments[1][arguments[1].length-1]}}(this.x),function(a,b){"use strict";a.methods.init=function(){a.core.parse()},document.addEventListener("DOMContentLoaded",a.methods.init,!1)}(this.x,this);
//# sourceMappingURL=x.min.map